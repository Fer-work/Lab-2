<!DOCTYPE html>
<html lang="en">
  <%- include('shared/metaData') %>

  <body>
    <%- include('shared/header') %>

    <div class="container">
      <div class="m-3">
        <div class="d-flex flex">
          <h2 class="me-auto"><%- pageTitle %></h2>
        </div>
      </div>

      <div class="table-responsive">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Date</th>
              <th>Description</th>
              <th>Debit ($)</th>
              <th>Credit ($)</th>
              <th>Balance ($)</th>
            </tr>
          </thead>
          <tbody>
            <% transactions.forEach(item => { %>
            <tr scope="row">
              <td>
                <%= item.date.toLocaleString('en-CA', {year: 'numeric',
                month:'long', day:"2-digit",}) %>
              </td>
              <td><%= item.description %></td>
              <td>
                <%= item.debit.toLocaleString('en-CA', { style: 'currency',
                currency: 'CAD' }) %>
              </td>
              <td>
                <%= item.credit.toLocaleString('en-CA', { style: 'currency',
                currency: 'CAD' }) %>
              </td>
              <td>
                <%= item.balance.toLocaleString('en-CA', { style: 'currency',
                currency: 'CAD' }) %>
              </td>
            </tr>
            <% }); %>
          </tbody>
        </table>
      </div>

      <h3 class="mt-4">âž• Add a Transaction</h3>
      <form action="/add" method="POST" class="mt-2">
        <div class="mb-2">
          <input
            type="text"
            name="description"
            placeholder="Description"
            class="form-control"
            required
          />
        </div>
        <div class="mb-2">
          <input
            type="number"
            step="0.01"
            name="debit"
            placeholder="Debit ($)"
            class="form-control"
          />
        </div>
        <div class="mb-2">
          <input
            type="number"
            step="0.01"
            name="credit"
            placeholder="Credit ($)"
            class="form-control"
          />
        </div>
        <button type="submit" class="btn btn-success">Add Transaction</button>
      </form>
    </div>

    <%- include('shared/footer') %>
  </body>
</html>
